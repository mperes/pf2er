<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>PF2ER</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content>
  <meta name="keywords" content><!--  CSS -->
  <link rel="stylesheet" href="reset.css">
  <link rel="stylesheet" href="pathfinder.css">
  <script src="jquery-1.11.1.js"></script><!--script(src="https://code.jquery.com/jquery-latest.min.js")-->
</head><!--body.no-chat-->

<body class="is--pc">
  <div class="rolls">
    <div class="roll"><span class="roll__info roll__info--author">author</span>
      <div class="layout layout--grid layout--cols--40px-1fr layout--gap--half feature__container"
        style="grid-template-columns: 40px 1fr;"><span class="roll__info roll__info--result">18</span>
        <div class="roll__title"><span class="roll__info roll__info--type">attack roll</span><span
            class="roll__info roll__info--name">super battleaxe</span></div>
      </div>
      <div class="roll__exploded"><button class="roll__disclose"></button>
        <div class="roll__entry"><img src="imgs/Dice/yellow/d20.svg"><span>basic roll (18)</span></div>
        <div class="roll__entry"><img src="imgs/Dice/yellow/d4.svg"><span>bless (2)</span></div>
      </div>
      <div class="roll__details">
        <div class="roll__detail"><span class="roll__detail--name">attack type</span><span
            class="roll__detail--value">melee</span></div>
        <div class="roll__detail"><span class="roll__detail--name">range</span><span class="roll__detail--value">5
            feet</span></div>
      </div>
      <div class="roll__description">Exercitation Adipiscing Dolor Dolor In Nisi Nostrud Sint Tempor Dolore Non Laborum
        Ex Mollit Id Lorem Incididunt Proident Occaecat Officia In Nostrud Duis Do In Excepteur Duis Cillum Anim Laboris
        Veniam Nisi Id Ad Do Ut Cillum Deserunt Ipsum Do Commodo Dolor Sit Ipsum Proident Veniam Laborum Dolor Ut
        Incididunt Ullamco Magna Cillum Voluptate Nostrud</div>
    </div>
    <div class="roll roll--critical-success"><span class="roll__info roll__info--author">author</span>
      <div class="layout layout--grid layout--cols--40px-1fr layout--gap--half feature__container"
        style="grid-template-columns: 40px 1fr;"><span class="roll__info roll__info--result">22</span>
        <div class="roll__title"><span class="roll__info roll__info--type">attack roll</span><span
            class="roll__info roll__info--name">super battleaxe</span></div>
      </div>
      <div class="roll__exploded"><button class="roll__disclose"></button>
        <div class="roll__entry"><img src="imgs/Dice/yellow/d20.svg"><span>basic roll (20)</span></div>
        <div class="roll__entry"><img src="imgs/Dice/yellow/d4.svg"><span>bless (2)</span></div>
      </div>
      <div class="roll__details">
        <div class="roll__detail"><span class="roll__detail--name">attack type</span><span
            class="roll__detail--value">melee</span></div>
        <div class="roll__detail"><span class="roll__detail--name">range</span><span class="roll__detail--value">5
            feet</span></div>
      </div>
      <div class="roll__description">Quis Sit Cupidatat Veniam Esse Nisi Voluptate In Do Reprehenderit Deserunt Esse
        Quis Est Do Ut Excepteur Aute Pariatur Culpa Consequat Incididunt In Fugiat Nulla Magna Incididunt Aliqua Ipsum
        Est Non Labore In In Aliquip Sunt Dolor In Officia Incididunt Enim Reprehenderit Aliquip Mollit Veniam Ullamco
        Quis Proident In Est Labore Adipiscing Enim Cupidatat Do Dolore Sint Non Dolor Pariatur Labore Sunt Ipsum
        Aliquip Ipsum In Ullamco Proident Velit Consectetur Exercitation Aliqua Ut Aute Cupidatat Magna Qui Sit
        Voluptate Laborum Labore Aliquip Eiusmod Id</div>
    </div>
    <div class="roll roll--critical-fail"><span class="roll__info roll__info--author">author</span>
      <div class="layout layout--grid layout--cols--40px-1fr layout--gap--half feature__container"
        style="grid-template-columns: 40px 1fr;"><span class="roll__info roll__info--result">3</span>
        <div class="roll__title"><span class="roll__info roll__info--type">attack roll</span><span
            class="roll__info roll__info--name">super battleaxe</span></div>
      </div>
      <div class="roll__exploded"><button class="roll__disclose roll__disclose--open"></button>
        <div class="roll__entry"><img src="imgs/Dice/yellow/d20.svg"><span>basic roll (1)</span></div>
        <div class="roll__entry"><img src="imgs/Dice/yellow/d4.svg"><span>bless (2)</span></div>
      </div>
      <div class="roll__details">
        <div class="roll__detail"><span class="roll__detail--name">attack type</span><span
            class="roll__detail--value">melee</span></div>
        <div class="roll__detail"><span class="roll__detail--name">range</span><span class="roll__detail--value">5
            feet</span></div>
      </div>
      <div class="roll__description">Proident Aliquip Eiusmod Ad Amet Magna Exercitation Cillum Ullamco Non Adipiscing
        Pariatur Amet Do Amet Reprehenderit Deserunt Ipsum Aliqua Duis Proident Ad Mollit Cillum Commodo Laborum Quis
        Laborum Cillum In Labore Ex Dolore Aliqua Deserunt Aliquip Irure Magna Sunt In Adipiscing Aute Commodo Dolor
        Exercitation Mollit Aliqua Cillum Ad Consectetur Minim Tempor Fugiat Amet Nulla Ut Anim Aliquip Nulla Dolor
        Velit Irure Adipiscing Nostrud Aliquip In Exercitation Nisi Culpa Dolore Cillum Non</div>
    </div>
  </div>
</body>

</html>
<script>$(".proficiency-level").on("change", function () {
    const level = $(this).val();
    if (level === "untrained") $(this).removeClass("picker--active");
    else $(this).addClass("picker--active");
  });

  $(".initiative-skill").on("change", function () {
    const level = $(this).val();
    if (level === "perception") $(this).removeClass("picker--active");
    else $(this).addClass("picker--active");
  });

  $(".picker--disable-first-option").on("change", function () {
    const level = $(this).val();
    const firstOption = $(this).find("option").first().attr("value");
    if (level === firstOption) $(this).removeClass("picker--active");
    else $(this).addClass("picker--active");
  });

  $("input[name=hero_points]").on("change", function () {
    const value = Math.min(Math.max($(this).val(), 0), 3);
    $(this).val(value);
    const steps = $("input[name=hero_points]")
      .parent()
      .find(".pill .attribute-card__step");
    steps.each(function (index) {
      const step = $(this);
      if (value > index) step.addClass("attribute-card__step--checked");
      else step.removeClass("attribute-card__step--checked");
    });
  });

  $("input[name=dying]").on("change", function () {
    const value = Math.min(Math.max($(this).val(), 0), 4);
    $(this).val(value);
    const steps = $("input[name=dying]")
      .parent()
      .find(".pill .attribute-card__step");
    steps.each(function (index) {
      const step = $(this);
      if (value > index) step.addClass("attribute-card__step--checked--negative");
      else step.removeClass("attribute-card__step--checked--negative");
    });
  });

  const updateHPBar = () => {
    $("input[name=current_hp]").each(function () {
      const sheet = $(this).closest(".sheet");
      const currentHP = sheet.find("input[name=current_hp]").val();
      const maxHP = sheet.find("input[name=max_hp]").val();
      const percentage = sheet
        .find("input[name=current_hp]")
        .parent()
        .find(".pill .attribute-card__current-range");
      percentage.width(`${(currentHP / maxHP) * 100}%`);
    });
  };
  $("input[name=current_hp], input[name=max_hp]").on("change", function () {
    updateHPBar();
  });

  updateHPBar();

  $("button.card__disclose").click(function () {
    const card = $(this).closest(".discloseable-card");
    const openClass = "discloseable-card discloseable-card--open--open";
    const isOpen = card.hasClass(openClass);

    if (isOpen) {
      card.removeClass(openClass);
      const visibleSummaries = card.find(".card__summary:visible");
      if (visibleSummaries.length > 0) {
        card.find(".card__empty").addClass("card__empty--hidden");
      } else {
        card.find(".card__empty").removeClass("card__empty--hidden");
      }
    } else {
      card.addClass(openClass);
    }
  });

  $(".linked-element").on("mouseenter", function (e) {
    const target = $(this).attr("data-link");
    $(target).addClass("hover");
  });
  $(".linked-element").on("mouseleave", function (e) {
    const target = $(this).attr("data-link");
    $(target).removeClass("hover");
  });

  $(".resistances-weaknesses input[type=number]").change(function () {
    const target = $(this);
    const value = target.val();
    const card = $(this).closest(".damage-type");
    const checked = card.find(".partial-bonus__checkbox").is(":checked");
    if (value != 0) {
      target.closest(".damage-type").addClass("card__summary");
      target.closest(".damage-type").removeClass("card__details");
      if (value > 0) {
        $(this).removeClass("negative");
        $(this).addClass("positive");
      } else {
        $(this).addClass("negative");
        $(this).removeClass("positive");
      }
    } else {
      if (!checked) {
        target.closest(".damage-type").addClass("card__details");
        target.closest(".damage-type").removeClass("card__summary");
      }
      $(this).removeClass("negative");
      $(this).removeClass("positive");
    }
  });

  $(".immune .partial-bonus__checkbox").change(function () {
    const target = $(this);
    const card = $(this).closest(".damage-type");
    const value = card.find(".attribute-with-title__input").val();
    if ($(this).is(":checked")) {
      card.addClass("immune");
      target.closest(".damage-type").addClass("card__summary");
      target.closest(".damage-type").removeClass("card__details");
    } else {
      card.removeClass("immune");
      if (value == 0) {
        target.closest(".damage-type").addClass("card__details");
        target.closest(".damage-type").removeClass("card__summary");
      }
    }
  });

  let firstTime = true;
  const updateTab = (tab) => {
    const navigation = tab.closest(".tab-navigation");
    const selection = navigation.find(".tab-navigation__selection");
    const selected = navigation.find(".tab--selected");
    const position = selected.position();
    const width = firstTime ? 111 : selected.width();
    firstTime = false;
    selection.css("left", position.left);
    selection.width(width + 20);
  };
  $(".tab-navigation .tab").click(function () {
    const navigation = $(this).closest(".tab-navigation");
    navigation.find(".tab").removeClass("tab--selected");
    $(this).addClass("tab--selected");
    $(".sheet-content--open").removeClass("sheet-content--open");
    const contentID = `.sheet-content--${$(this).text().toLowerCase()}`;
    $(contentID).addClass("sheet-content--open");
    updateTab($(this));
  });

  updateTab($(".current-section"));

  $(".accordion .accordion__summary").click(function () {
    const accordion = $(this).closest(".accordion");
    const group = accordion.closest(".accordion-group");
    const minimizeAll = group.hasClass("accordion-group--minimize-all");
    const openClass = "accordion--open";
    if (minimizeAll) {
      accordion.toggleClass(openClass);
    } else {
      if (!accordion.hasClass(openClass)) {
        group.find(`.${openClass}`).removeClass(openClass);
        accordion.addClass(openClass);
      }
    }
  });

  $(".square-toggle").click(function () {
    $(this).toggleClass("square-toggle--checked");
  });

  $(".button-group--toggle").click(function () {
    $(this).toggleClass("button-group--toggle--pressed");
  });

  $(".disclose-resistances-weaknesses").click(function () {
    $("html, body").animate({ scrollTop: $(document).height() }, 200);
  });

  $(".condition-list .square-toggle").click(function () {
    const toggle = $(this);
    const listItem = toggle.closest(".condition");
    const removeButton = listItem.find(".condition__remove");
    if (toggle.hasClass("square-toggle--checked")) {
      //removeButton.addClass("button-group--disabled");
    } else {
      //removeButton.removeClass("button-group--disabled");
    }
  });

  $(".condition-list .condition__remove button").click(function () {
    const button = $(this);
    const listItem = button.closest(".condition");
    const group = button.closest(".button-group");
    const details = button.closest(".accordion__details");
    const counter = $(".accordion-conditions .accordion__counter span");
    if (!group.hasClass("button-group--disabled")) {
      counter.animate({ top: -20 }, 100, "swing", function () {
        counter.text(parseInt(counter.text()) - 1);
        counter.css("top", "20px");
        counter.animate({ top: 0 }, 100, "swing");
      });
      listItem.slideUp(200, function () {
        listItem.remove();
        document.documentElement.style.setProperty(
          "--conditions-height",
          `${details.height()}px`
        );
      });
    }
  });

  $(".feature__icon img").on("error", function () {
    const icon = $(this);
    const parent = $(icon).parent();
    const classes = parent.attr("class").split(" ");
    const typeClass = classes.filter((c) => c.includes("--type--"))[0];
    const defaultImg = typeClass.split("--")[typeClass.split("--").length - 1];
    icon.attr("src", `imgs/${defaultImg}.png`);
  });

  function replace(el) {
    const icon = $(el);
    const parent = $(icon).parent();
    const classes = parent.attr("class").split(" ");
    const typeClass = classes.filter((c) => c.includes("--type--"))[0];
    const defaultImg = typeClass.split("--")[typeClass.split("--").length - 1];
    icon.attr("src", `imgs/${defaultImg}.png`);
  }

  $(".square-select select").change(function () {
    const value = parseInt($(this).val());
    const container = $(this).parent();
    if (value > 0) container.addClass("square-select--selected");
    else container.removeClass("square-select--selected");
  });

  $(".open-modal").on("mouseenter", function () {
    $(this).parent().addClass("card--corner-decoration");
  });
  $(".open-modal").on("mouseleave", function () {
    $(this).parent().removeClass("card--corner-decoration");
  });

  $(".positive-number .positive-number__edit").on("change", function () {
    const edit = $(this);
    const display = edit.parent().find(".positive-number__display");
    const value = isNaN(edit.val()) ? 0 : parseInt(edit.val());
    const displayValue = value > 0 ? `+${value}` : String(value);
    display.text(displayValue);
  });

  $("[value]").each(function () {
    $(this).val($(this).attr("value"));
  });

  $("input[type=number]").on("keypress", function (event) {
    var regex = new RegExp("^[-|0-9]+$");
    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
    if (!regex.test(key)) {
      event.preventDefault();
      return false;
    }
  });

  $(".disclose-character-title").click(function () {
    const header = $(".sheet--pc .sheet-header");
    $(this).toggleClass("disclose-character-title--open");
    if (header.hasClass("sheet-header--transitioning")) return;
    header.addClass("sheet-header--transitioning");
    header.slideUp(200, function () {
      header.removeClass("sheet-header--transitioning");
      header.toggleClass("sheet-header--minimized");
      header.toggleClass("sheet-header--sticky");
      header.slideDown(200);
    });
  });

  $(".auto-resize-field__edit").on("keypress", function () {
    const edit = $(this);
    const display = edit.parent().find(".auto-resize-field__display");
    display.text(edit.val());
  });
  $(".auto-resize-field__edit").on("change", function () {
    const edit = $(this);
    const display = edit.parent().find(".auto-resize-field__display");
    const placeholder = edit.attr("data-placeholder");
    const value = edit.val().trim() === "" ? placeholder : edit.val().trim();
    display.removeClass("auto-resize-field__display--placeholder");
    if (edit.val().trim() === "")
      display.addClass("auto-resize-field__display--placeholder");
    display.text(value);
  });

  $("input[name=max_hp]").change(function () {
    const maxHP = $(this);
    const currentHP = $("input[name=current_hp]");
    const newValue = !isNaN(maxHP.val()) ? parseInt(maxHP.val()) : 0;
    const oldValue = parseInt(maxHP.attr("data-previous"));
    const difference = newValue - oldValue;
    currentHP.val(Math.max(parseInt(currentHP.val()) + difference, 0));
    updateHPBar();
  });

  $("input[name=shield_hp]").change(function () {
    const currentHP = $(this);
    const value = !isNaN(currentHP.val()) ? parseInt(currentHP.val()) : 0;
    currentHP.val(value);
    const enabledState = currentHP
      .closest(".discloseable-card")
      .find(".partial-bonus--enabled");
    const enabledDisabled = currentHP
      .closest(".discloseable-card")
      .find(".partial-bonus--disabled");
    const check = currentHP
      .closest(".discloseable-card")
      .find(".partial-bonus__checkbox");
    if (value === 0) {
      enabledState.hide();
      enabledDisabled.css("display", "flex");
      check.attr("checked", false);
    } else {
      enabledState.css("display", "flex");
      enabledDisabled.hide();
    }
  });

  $(".starred").click(function () {
    $(".starred").removeClass("starred--active");
    $(this).addClass("starred--active");
  });

  $(".accordion-conditions .accordion__config").click(function () {
    const modal = $(".conditions-modal");
    showModal(modal);
  });

  $(".accordion-strikes .accordion__config").click(function () {
    const modal = $(".strikes-modal");
    showModal(modal);
  });

  $(".accordion-actions .accordion__config").click(function () {
    const modal = $(".actions-modal");
    showModal(modal);
  });

  $(".accordion-reactions .accordion__config").click(function () {
    const modal = $(".reactions-modal");
    showModal(modal);
  });

  $(".accordion-free-actions .accordion__config").click(function () {
    const modal = $(".free-actions-modal");
    showModal(modal);
  });

  $("button.whatisnew").click(function () {
    const modal = $(".whatisnew-modal");
    showModal(modal);
  });

  $("button.pregens").click(function () {
    const modal = $(".pregens-modal");
    showModal(modal);
  });

  $(".accordion__config").click(function (event) {
    event.stopImmediatePropagation();
  });

  $(".custom-conditions h4, .custom-conditions .add-custom__done").click(
    function () {
      const states = $(this).closest(".states");
      toggleState(states);
      const firstElement = states.find(".tabbed-content__tabs li[data-id=1]");
      console.log(firstElement);
      setTimeout(function () {
        firstElement.click();
      }, 10);
    }
  );

  $(".add-custom__delete").click(function () {
    const item = $(this).closest("li[data-id]");
    item.remove();
  });

  $("select[name=custom-action-trackusage]").change(function () {
    console.log(2);
    const value = $(this).val();
    const relatedFields = $(".track-max-usages, .track-period");
    if (value === "yes") {
      relatedFields.removeClass("form__field--disabled");
      relatedFields.find("input").removeAttr("disabled");
    } else {
      relatedFields.addClass("form__field--disabled");
      relatedFields.find("input").attr("disabled", "disabled");
    }
  });

  $(".inventory-item__icon").click(function () {
    $(this).toggleClass("inventory-item__icon--equipped");
  });

  $(".show-description").click(function () {
    const item = $(this).closest(".inventory-item");
    item.find(".item-details").toggleClass("item-details--hidden");
  });

  $("body").on("click", ".roll__disclose", function () {
    $(this).toggleClass("roll__disclose--open");
  });

  const roll = (options) => {
    const author = options.author
      ? `<span class="roll__info roll__info--author">${options.author}</span>`
      : "";
    const entries = getRollEntries(options.entries);
    const details = getRollDetails(options.details);
    const detailsHTML = details
      ? `<div class="roll__details">${details}</div>`
      : "";
    const descriptionHTML = options.description
      ? `<div class="roll__description">${options.description}</div>`
      : "";
    const tags = Array.isArray(options.tags)
      ? `<div class="tags">${options.tags
        .sort()
        .map((tag) => {
          return `<span class="tag">${tag}</span>`;
        })
        .join("")}</div>`
      : "";
    const roll = $(`
  <div class="roll">
    ${author}
    <div class="layout layout--grid layout--cols--40px-1fr layout--gap--half feature__container" style="grid-template-columns: 40px 1fr;">
      <span class="roll__info roll__info--result">${entries.total}</span>
      <div class="roll__title">
        <span class="roll__info roll__info--type">${options.type}</span>
        <span class="roll__info roll__info--name">${options.name}</span>
      </div>
    </div>
    <div class="roll__exploded">
      <button class="roll__disclose"></button>
      ${entries.list}
    </div>
    ${detailsHTML}
    ${descriptionHTML}
    ${tags}
  </div>
  `);
    $(".rolls").append(roll);
  };

  const chatDescription = (options) => {
    const author = options.author
      ? `<span class="roll__info roll__info--author">${options.author}</span>`
      : "";
    const details = getRollDetails(options.details);
    const detailsHTML = details
      ? `<div class="roll__details">${details}</div>`
      : "";
    const descriptionHTML = options.description
      ? `<div class="roll__description">${options.description}</div>`
      : "";
    const defaultIcon = `
    <svg width="100%" height="100%" viewBox="0 0 10 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
      <g transform="matrix(1,0,0,1,-170.855,-10.4146)">
          <path d="M175.778,45.536L175.778,45.543C176.904,45.543 178.03,45.567 179.153,45.526C179.396,45.518 179.703,45.333 179.839,45.132C179.914,45.019 179.715,44.695 179.605,44.484C179.475,44.235 179.226,44.024 179.17,43.767C178.884,42.433 178.56,41.099 178.413,39.747C178.287,38.593 178.413,37.411 178.372,36.245C178.324,34.862 178.921,33.852 180.005,33.076C180.853,32.469 180.859,32.358 180.057,31.748C178.938,30.893 178.241,29.869 178.363,28.348C178.457,27.155 178.434,25.946 178.368,24.748C178.272,22.972 178.521,21.312 179.636,19.863C179.732,19.738 179.788,19.407 179.728,19.368C179.549,19.243 179.303,19.153 179.085,19.157C178.809,19.163 178.535,19.336 178.262,19.327C176.879,19.278 175.496,19.178 174.112,19.132C173.61,19.116 173.1,19.182 172.6,19.249C172.26,19.294 171.928,19.405 171.593,19.487C171.682,19.765 171.698,20.105 171.87,20.312C172.735,21.355 172.957,22.576 172.948,23.882C172.936,25.376 172.895,26.872 172.961,28.362C173.019,29.673 172.55,30.661 171.57,31.488C170.591,32.315 170.623,32.576 171.628,33.349C172.478,34 173,34.839 172.94,35.946C172.832,37.973 172.752,40.005 172.544,42.021C172.463,42.813 172.074,43.574 171.817,44.346C171.732,44.601 171.483,45.025 171.537,45.064C171.815,45.276 172.163,45.501 172.495,45.516C173.585,45.571 174.68,45.536 175.774,45.536L175.778,45.536ZM176.017,18.032C176.236,17.819 176.402,17.663 176.564,17.501C177.422,16.645 178.274,15.779 179.141,14.931C179.757,14.328 179.761,13.889 179.141,13.289C178.326,12.499 177.516,11.703 176.717,10.896C176.091,10.264 175.832,10.25 175.167,10.878C174.304,11.695 173.44,12.515 172.579,13.334C171.958,13.925 172.009,14.379 172.644,14.96C173.566,15.803 174.437,16.7 175.341,17.562C175.513,17.726 175.733,17.839 176.015,18.034L176.017,18.032Z"/>
      </g>
    </svg>
  `;
    const defaultIconWithBG = `<img src="imgs/info_with_bg.svg">`;
    const selectedIcon =
      options.defaultIcon && options.defaultIcon === "branded"
        ? defaultIconWithBG
        : defaultIcon;
    const icon = options.defaultIcon
      ? `<div class="feature__icon feature__icon--default">${selectedIcon}</div>`
      : `<div class="feature__icon"><img src="imgs/${options.name
        .toLowerCase()
        .replace(/ /g, "_")}.png" alt="${options.name}"></div>`;
    const tags = Array.isArray(options.tags)
      ? `<div class="tags">${options.tags
        .sort()
        .map((tag) => {
          return `<span class="tag">${tag}</span>`;
        })
        .join("")}</div>`
      : "";
    let upcast = "";
    if (typeof options.upcast === "object") {
      let upcastContent = "";
      Object.keys(options.upcast).forEach((rank) => {
        upcastContent += `<span class="upcast__rank">${rank}</span><span class="upcast__description">${options.upcast[rank]}</span>`;
      });
      upcast = `<div class="upcast"><span class="roll__detail--name">heightened casting</span><span class="upcast__header upcast__rank">rank</span><span class="upcast__header upcast__description">description</span>${upcastContent}</div><button class="roll__disclose"></button>`;
    }
    const roll = $(`
  <div class="roll roll--feature-description">
    ${author}
    <div class="layout layout--grid layout--cols--40px-1fr layout--gap--half feature__container" style="grid-template-columns: 40px 1fr;">
      ${icon}
      <div class="roll__title">
        <span class="roll__info roll__info--type">${options.type}</span>
        <span class="roll__info roll__info--name">${options.name}</span>
      </div>
    </div>
    ${detailsHTML}
    ${descriptionHTML}
    ${tags}
    ${upcast}
  </div>
  `);
    $(".rolls").append(roll);
  };

  const dieRoll = (size) => {
    return 1 + Math.round(Math.random() * (size - 1));
  };
  const diceRoll = (dice) => {
    if (!String(dice).toLowerCase().includes("d")) return dice;
    const quantity = parseInt(dice.trim().toLowerCase().split("d")[0]);
    const size = parseInt(dice.trim().toLowerCase().split("d")[1]);
    let total = 0;
    for (let i = 0; i < quantity; i++) {
      total += dieRoll(size);
    }
    return total;
  };

  const getRollEntries = (entries) => {
    const rollEntries = {
      total: 0,
      list: "",
    };
    Object.keys(entries).forEach((entry) => {
      const icon = getRollEntryIcon(entries[entry]);
      const result = diceRoll(entries[entry]);
      rollEntries.total += result;
      rollEntries.list += `<div class="roll__entry"><img src="${icon}"><span>${entry} (${result})</span></div>`;
    });

    return rollEntries;
  };

  const getRollDetails = (details) => {
    let rollDetails = "";
    Object.keys(details).forEach((detail) => {
      rollDetails += `<div class="roll__detail"><span class="roll__detail--name">${detail}</span><span class="roll__detail--value">${details[detail]}</span>
  </div>`;
    });

    return rollDetails;
  };

  const getRollEntryIcon = (value) => {
    if (String(value).toLowerCase().includes("d"))
      return `imgs/Dice/yellow/d${String(value).trim().toLowerCase().split("d")[1]
        }.svg`;
    else if (parseInt(value) < 0)`imgs/Dice/yellow/minus.svg`;
    return `imgs/Dice/yellow/plus.svg`;
  };

  $(".languages .toggle").click(function () {
    const item = $(this).closest(".simple-list__item");
    item.toggleClass("card__details");
  });

  $(".level-card .open-modal").click(function () {
    const modal = $(".character-level-modal");
    showModal(modal);
  });

  const recalcXP = () => {
    const modal = $(".character-level-modal");
    const currentLevelField = modal.find(".attribute-card__input[name=level]");
    const levelCardField = $(".level-card input");
    const xpField = modal.find(".attribute-card__input[name=xp]");
    const xpBarFields = $(
      ".character-level-modal .attribute-card__current-range, .level-card .attribute-card__current-range"
    );
    const currentLevel = isNaN(parseInt(currentLevelField.val()))
      ? 1
      : parseInt(currentLevelField.val());
    const xp = isNaN(parseInt(xpField.val())) ? 0 : parseInt(xpField.val());
    const hasLeveled = xp >= 1000;
    const levelsGained = hasLeveled ? Math.floor(xp / 1000) : 0;
    const xpLeft = xp % 1000;
    const progress = (xpLeft / 1000) * 100;
    if (hasLeveled) {
      xpField.val(xpLeft);
      const newLevel = currentLevel + levelsGained;
      currentLevelField.val(newLevel);
      levelCardField.val(newLevel);
    }
    xpBarFields.css("width", `${progress}%`);
  };

  const applyXP = (mod = 1) => {
    console.log(1);
    const modal = $(".character-level-modal");
    const applyField = modal.find("input[name=apply-xp]");
    const parsedValue = isNaN(parseInt(applyField.val()))
      ? 0
      : parseInt(applyField.val()) * mod;
    const xpField = modal.find(".attribute-card__input[name=xp]");
    const xp = isNaN(parseInt(xpField.val())) ? 0 : parseInt(xpField.val());
    const newXP = xp + parsedValue;
    xpField.val(newXP);
    applyField.val("");
    recalcXP();
  };

  $(".add-xp").click(function () {
    console.log(1);
    applyXP();
  });
  $(".del-xp").click(function () {
    applyXP(-1);
  });

  $(".attribute-card__input[name=xp]").change(function () {
    recalcXP();
  });

  $(".level-card input").change(function () {
    const modalField = $(
      ".character-level-modal .attribute-card__input[name=level]"
    );
    modalField.val($(this).val());
  });

  $(".square-check").click(function () {
    $(this).toggleClass("square-check--checked");
  });

  $(".settings").click(function () {
    console.log(1);
    $("body").toggleClass("is--pc");
  });

  $(".pregens-modal .pregen").click(function () {
    $(".pregens-modal").addClass("show-confirmation");
  });

  $(".pregens-modal .cancel-pregen").click(function () {
    $(".pregens-modal").removeClass("show-confirmation");
  });

  roll({
    author: "sastified bat",
    type: "ability check",
    name: "strength check",
    entries: { "basic roll": "1d20", bless: "1d4", strength: 1 },
    details: {},
    description:
      "Nostrud Ea In Enim Voluptate Amet Nisi Adipiscing Sint Consectetur Voluptate Adipiscing Dolor Ut Ipsum Ea Duis Tempor Voluptate Ut Voluptate Ea Laborum Do Non Velit Ut Ut Dolore Adipiscing Adipiscing",
  });

  roll({
    author: "sastified bat",
    type: "check with tags",
    name: "strength check",
    entries: { "basic roll": "1d20", bless: "1d4", strength: 1 },
    details: {},
    description:
      "Nostrud Ea In Enim Voluptate Amet Nisi Adipiscing Sint Consectetur Voluptate Adipiscing Dolor Ut Ipsum Ea Duis Tempor Voluptate Ut Voluptate Ea Laborum Do Non Velit Ut Ut Dolore Adipiscing Adipiscing",
    tags: ["agile", "finess"],
  });

  chatDescription({
    author: "sastified bat",
    type: "feature description",
    name: "Unnarmed Strike",
    details: { "attack type": "melee", range: "5 feet" },
    description:
      "Nostrud Ea In Enim Voluptate Amet Nisi Adipiscing Sint Consectetur Voluptate Adipiscing Dolor Ut Ipsum Ea Duis Tempor Voluptate Ut Voluptate Ea Laborum Do Non Velit Ut Ut Dolore Adipiscing Adipiscing",
  });

  chatDescription({
    author: "sastified bat",
    type: "description with tags",
    name: "Unnarmed Strike",
    details: { "attack type": "melee", range: "5 feet" },
    description:
      "Nostrud Ea In Enim Voluptate Amet Nisi Adipiscing Sint Consectetur Voluptate Adipiscing Dolor Ut Ipsum Ea Duis Tempor Voluptate Ut Voluptate Ea Laborum Do Non Velit Ut Ut Dolore Adipiscing Adipiscing",
    tags: ["agile", "finess"],
  });

  chatDescription({
    author: "sastified bat",
    type: "description with tags",
    name: "Unnarmed Strike",
    details: { "attack type": "melee", range: "5 feet" },
    description:
      "Nostrud Ea In Enim Voluptate Amet Nisi Adipiscing Sint Consectetur Voluptate Adipiscing Dolor Ut Ipsum Ea Duis Tempor Voluptate Ut Voluptate Ea Laborum Do Non Velit Ut Ut Dolore Adipiscing Adipiscing",
    defaultIcon: true,
    tags: ["agile", "finess"],
  });

  chatDescription({
    author: "sastified bat",
    type: "description with tags",
    name: "Unnarmed Strike",
    details: { "attack type": "melee", range: "5 feet" },
    description:
      "Nostrud Ea In Enim Voluptate Amet Nisi Adipiscing Sint Consectetur Voluptate Adipiscing Dolor Ut Ipsum Ea Duis Tempor Voluptate Ut Voluptate Ea Laborum Do Non Velit Ut Ut Dolore Adipiscing Adipiscing",
    defaultIcon: "branded",
    tags: ["agile", "finess"],
    upcast: {
      1: "Enim voluptate amet nisi adipiscing sint consectetur voluptate adipiscing dolor ut ipsum ea duis tempor voluptate ut voluptate.",
      3: "Enim voluptate amet nisi adipiscing sint consectetur voluptate adipiscing dolor ut ipsum ea duis tempor voluptate ut voluptate.",
    },
  });
</script>
<script>$(".add-custom").click(function () {
    if ($(this).hasClass("add-custom--open")) return;
    $(this).addClass("add-custom--open");
    $(this).find(".tabbed-content .tabbed-content__tabs li:first-child").addClass("selected");
    $(this).find(".tabbed-content .tabbed-content__tab:first-child").addClass("selected");
    const firstElement = $(".tabbed-content .tabbed-content__tab:first-child > *:first-child");
    setTimeout(function () { firstElement.focus() }, 50);
  });

  $(".add-custom__delete").click(function (event) {
    const addCustom = $(this).closest(".add-custom");
    addCustom.find("label *:not(.title)").val("");
    addCustom.removeClass("add-custom--open");
    event.stopPropagation();
  });

  $(".add-custom__done").click(function (event) {
    const addCustom = $(this).closest(".add-custom");
    addCustom.find("label *:not(.title)").val("");
    addCustom.removeClass("add-custom--open");
    event.stopPropagation();
  }); $(".auto-complete input").change(function () {
    if ($(this).val().trim() === "") return;
    const autoComplete = $(this).closest(".auto-complete");
    const sampleChip = autoComplete.find(".chip--sample");
    const existingLabels = new Set();
    const defaultType = autoComplete.is("[data-default-type]") ? autoComplete.attr("data-default-type") : false;
    console.log(defaultType);
    existingLabels.add($(this).val());
    autoComplete.find(".chip:not(.chip--sample)").each(function () {
      existingLabels.add($(this).text());
    });
    autoComplete.find(".chip:not(.chip--sample)").remove();
    const list = Array.from(existingLabels).sort().reverse();
    list.forEach(trait => {
      const newChip = sampleChip.clone().prependTo(autoComplete);
      if (defaultType) newChip.attr("data-type", defaultType);
      console.log(trait.toLowerCase());
      if (defaultType && ["tiny", "small", "medium", "large", "huge", "gargantuan"].includes(trait.toLowerCase().trim())) newChip.attr("data-type", "size");
      if (defaultType && ["common", "uncommon", "rare", "very rare"].includes(trait.toLowerCase().trim())) newChip.attr("data-type", "rarity");
      newChip.find(".chip__title").text(trait);
      newChip.removeClass("chip--sample");
    });
    $(this).val("");
  });

  $(".auto-complete input").on("keydown", function (event) {
    const key = event.key;
    if (key === "Backspace") {
      const autoComplete = $(this).closest(".auto-complete");
      const lastChip = autoComplete.find(".chip:not(.chip--sample)").last();
      if (lastChip.length > 0) {
        lastChip.remove();
      }
    }
  }); const wordList = [
    "ability",
    "able",
    "aboard",
    "about",
    "above",
    "accept",
    "accident",
    "according",
    "account",
    "accurate",
    "acres",
    "across",
    "act",
    "action",
    "active",
    "activity",
    "actual",
    "actually",
    "add",
    "addition",
    "additional",
    "adjective",
    "adult",
    "adventure",
    "advice",
    "affect",
    "afraid",
    "after",
    "afternoon",
    "again",
    "against",
    "age",
    "ago",
    "agree",
    "ahead",
    "aid",
    "air",
    "airplane",
    "alike",
    "alive",
    "all",
    "allow",
    "almost",
    "alone",
    "along",
    "aloud",
    "alphabet",
    "already",
    "also",
    "although",
    "am",
    "among",
    "amount",
    "ancient",
    "angle",
    "angry",
    "animal",
    "announced",
    "another",
    "answer",
    "ants",
    "any",
    "anybody",
    "anyone",
    "anything",
    "anyway",
    "anywhere",
    "apart",
    "apartment",
    "appearance",
    "apple",
    "applied",
    "appropriate",
    "are",
    "area",
    "arm",
    "army",
    "around",
    "arrange",
    "arrangement",
    "arrive",
    "arrow",
    "art",
    "article",
    "as",
    "aside",
    "ask",
    "asleep",
    "at",
    "ate",
    "atmosphere",
    "atom",
    "atomic",
    "attached",
    "attack",
    "attempt",
    "attention",
    "audience",
    "author",
    "automobile",
    "available",
    "average",
    "avoid",
    "aware",
    "away",
    "baby",
    "back",
    "bad",
    "badly",
    "bag",
    "balance",
    "ball",
    "balloon",
    "band",
    "bank",
    "bar",
    "bare",
    "bark",
    "barn",
    "base",
    "baseball",
    "basic",
    "basis",
    "basket",
    "bat",
    "battle",
    "be",
    "bean",
    "bear",
    "beat",
    "beautiful",
    "beauty",
    "became",
    "because",
    "become",
    "becoming",
    "bee",
    "been",
    "before",
    "began",
    "beginning",
    "begun",
    "behavior",
    "behind",
    "being",
    "believed",
    "bell",
    "belong",
    "below",
    "belt",
    "bend",
    "beneath",
    "bent",
    "beside",
    "best",
    "bet",
    "better",
    "between",
    "beyond",
    "bicycle",
    "bigger",
    "biggest",
    "bill",
    "birds",
    "birth",
    "birthday",
    "bit",
    "bite",
    "black",
    "blank",
    "blanket",
    "blew",
    "blind",
    "block",
    "blood",
    "blow",
    "blue",
    "board",
    "boat",
    "body",
    "bone",
    "book",
    "border",
    "born",
    "both",
    "bottle",
    "bottom",
    "bound",
    "bow",
    "bowl",
    "box",
    "boy",
    "brain",
    "branch",
    "brass",
    "brave",
    "bread",
    "break",
    "breakfast",
    "breath",
    "breathe",
    "breathing",
    "breeze",
    "brick",
    "bridge",
    "brief",
    "bright",
    "bring",
    "broad",
    "broke",
    "broken",
    "brother",
    "brought",
    "brown",
    "brush",
    "buffalo",
    "build",
    "building",
    "built",
    "buried",
    "burn",
    "burst",
    "bus",
    "bush",
    "business",
    "busy",
    "but",
    "butter",
    "buy",
    "by",
    "cabin",
    "cage",
    "cake",
    "call",
    "calm",
    "came",
    "camera",
    "camp",
    "can",
    "canal",
    "cannot",
    "cap",
    "capital",
    "captain",
    "captured",
    "car",
    "carbon",
    "card",
    "care",
    "careful",
    "carefully",
    "carried",
    "carry",
    "case",
    "cast",
    "castle",
    "cat",
    "catch",
    "cattle",
    "caught",
    "cause",
    "cave",
    "cell",
    "cent",
    "center",
    "central",
    "century",
    "certain",
    "certainly",
    "chain",
    "chair",
    "chamber",
    "chance",
    "change",
    "changing",
    "chapter",
    "character",
    "characteristic",
    "charge",
    "chart",
    "check",
    "cheese",
    "chemical",
    "chest",
    "chicken",
    "chief",
    "child",
    "children",
    "choice",
    "choose",
    "chose",
    "chosen",
    "church",
    "circle",
    "circus",
    "citizen",
    "city",
    "class",
    "classroom",
    "claws",
    "clay",
    "clean",
    "clear",
    "clearly",
    "climate",
    "climb",
    "clock",
    "close",
    "closely",
    "closer",
    "cloth",
    "clothes",
    "clothing",
    "cloud",
    "club",
    "coach",
    "coal",
    "coast",
    "coat",
    "coffee",
    "cold",
    "collect",
    "college",
    "colony",
    "color",
    "column",
    "combination",
    "combine",
    "come",
    "comfortable",
    "coming",
    "command",
    "common",
    "community",
    "company",
    "compare",
    "compass",
    "complete",
    "completely",
    "complex",
    "composed",
    "composition",
    "compound",
    "concerned",
    "condition",
    "congress",
    "connected",
    "consider",
    "consist",
    "consonant",
    "constantly",
    "construction",
    "contain",
    "continent",
    "continued",
    "contrast",
    "control",
    "conversation",
    "cook",
    "cookies",
    "cool",
    "copper",
    "copy",
    "corn",
    "corner",
    "correct",
    "correctly",
    "cost",
    "cotton",
    "could",
    "count",
    "country",
    "couple",
    "courage",
    "course",
    "court",
    "cover",
    "cow",
    "cowboy",
    "crack",
    "cream",
    "create",
    "creature",
    "crew",
    "crop",
    "cross",
    "crowd",
    "cry",
    "cup",
    "curious",
    "current",
    "curve",
    "customs",
    "cut",
    "cutting",
    "daily",
    "damage",
    "dance",
    "danger",
    "dangerous",
    "dark",
    "darkness",
    "date",
    "daughter",
    "dawn",
    "day",
    "dead",
    "deal",
    "dear",
    "death",
    "decide",
    "declared",
    "deep",
    "deeply",
    "deer",
    "definition",
    "degree",
    "depend",
    "depth",
    "describe",
    "desert",
    "design",
    "desk",
    "detail",
    "determine",
    "develop",
    "development",
    "diagram",
    "diameter",
    "did",
    "die",
    "differ",
    "difference",
    "different",
    "difficult",
    "difficulty",
    "dig",
    "dinner",
    "direct",
    "direction",
    "directly",
    "dirt",
    "dirty",
    "disappear",
    "discover",
    "discovery",
    "discuss",
    "discussion",
    "disease",
    "dish",
    "distance",
    "distant",
    "divide",
    "division",
    "do",
    "doctor",
    "does",
    "dog",
    "doing",
    "doll",
    "dollar",
    "done",
    "donkey",
    "door",
    "dot",
    "double",
    "doubt",
    "down",
    "dozen",
    "draw",
    "drawn",
    "dream",
    "dress",
    "drew",
    "dried",
    "drink",
    "drive",
    "driven",
    "driver",
    "driving",
    "drop",
    "dropped",
    "drove",
    "dry",
    "duck",
    "due",
    "dug",
    "dull",
    "during",
    "dust",
    "duty",
    "each",
    "eager",
    "ear",
    "earlier",
    "early",
    "earn",
    "earth",
    "easier",
    "easily",
    "east",
    "easy",
    "eat",
    "eaten",
    "edge",
    "education",
    "effect",
    "effort",
    "egg",
    "eight",
    "either",
    "electric",
    "electricity",
    "element",
    "elephant",
    "eleven",
    "else",
    "empty",
    "end",
    "enemy",
    "energy",
    "engine",
    "engineer",
    "enjoy",
    "enough",
    "enter",
    "entire",
    "entirely",
    "environment",
    "equal",
    "equally",
    "equator",
    "equipment",
    "escape",
    "especially",
    "essential",
    "establish",
    "even",
    "evening",
    "event",
    "eventually",
    "ever",
    "every",
    "everybody",
    "everyone",
    "everything",
    "everywhere",
    "evidence",
    "exact",
    "exactly",
    "examine",
    "example",
    "excellent",
    "except",
    "exchange",
    "excited",
    "excitement",
    "exciting",
    "exclaimed",
    "exercise",
    "exist",
    "expect",
    "experience",
    "experiment",
    "explain",
    "explanation",
    "explore",
    "express",
    "expression",
    "extra",
    "eye",
    "face",
    "facing",
    "fact",
    "factor",
    "factory",
    "failed",
    "fair",
    "fairly",
    "fall",
    "fallen",
    "familiar",
    "family",
    "famous",
    "far",
    "farm",
    "farmer",
    "farther",
    "fast",
    "fastened",
    "faster",
    "fat",
    "father",
    "favorite",
    "fear",
    "feathers",
    "feature",
    "fed",
    "feed",
    "feel",
    "feet",
    "fell",
    "fellow",
    "felt",
    "fence",
    "few",
    "fewer",
    "field",
    "fierce",
    "fifteen",
    "fifth",
    "fifty",
    "fight",
    "fighting",
    "figure",
    "fill",
    "film",
    "final",
    "finally",
    "find",
    "fine",
    "finest",
    "finger",
    "finish",
    "fire",
    "fireplace",
    "firm",
    "first",
    "fish",
    "five",
    "fix",
    "flag",
    "flame",
    "flat",
    "flew",
    "flies",
    "flight",
    "floating",
    "floor",
    "flow",
    "flower",
    "fly",
    "fog",
    "folks",
    "follow",
    "food",
    "foot",
    "football",
    "for",
    "force",
    "foreign",
    "forest",
    "forget",
    "forgot",
    "forgotten",
    "form",
    "former",
    "fort",
    "forth",
    "forty",
    "forward",
    "fought",
    "found",
    "four",
    "fourth",
    "fox",
    "frame",
    "free",
    "freedom",
    "frequently",
    "fresh",
    "friend",
    "friendly",
    "frighten",
    "frog",
    "from",
    "front",
    "frozen",
    "fruit",
    "fuel",
    "full",
    "fully",
    "fun",
    "function",
    "funny",
    "fur",
    "furniture",
    "further",
    "future",
    "gain",
    "game",
    "garage",
    "garden",
    "gas",
    "gasoline",
    "gate",
    "gather",
    "gave",
    "general",
    "generally",
    "gentle",
    "gently",
    "get",
    "getting",
    "giant",
    "gift",
    "girl",
    "give",
    "given",
    "giving",
    "glad",
    "glass",
    "globe",
    "go",
    "goes",
    "gold",
    "golden",
    "gone",
    "good",
    "goose",
    "got",
    "government",
    "grabbed",
    "grade",
    "gradually",
    "grain",
    "grandfather",
    "grandmother",
    "graph",
    "grass",
    "gravity",
    "gray",
    "great",
    "greater",
    "greatest",
    "greatly",
    "green",
    "grew",
    "ground",
    "group",
    "grow",
    "grown",
    "growth",
    "guard",
    "guess",
    "guide",
    "gulf",
    "gun",
    "habit",
    "had",
    "hair",
    "half",
    "halfway",
    "hall",
    "hand",
    "handle",
    "handsome",
    "hang",
    "happen",
    "happened",
    "happily",
    "happy",
    "harbor",
    "hard",
    "harder",
    "hardly",
    "has",
    "hat",
    "have",
    "having",
    "hay",
    "he",
    "headed",
    "heading",
    "health",
    "heard",
    "hearing",
    "heart",
    "heat",
    "heavy",
    "height",
    "held",
    "hello",
    "help",
    "helpful",
    "her",
    "herd",
    "here",
    "herself",
    "hidden",
    "hide",
    "high",
    "higher",
    "highest",
    "highway",
    "hill",
    "him",
    "himself",
    "his",
    "history",
    "hit",
    "hold",
    "hole",
    "hollow",
    "home",
    "honor",
    "hope",
    "horn",
    "horse",
    "hospital",
    "hot",
    "hour",
    "house",
    "how",
    "however",
    "huge",
    "human",
    "hundred",
    "hung",
    "hungry",
    "hunt",
    "hunter",
    "hurried",
    "hurry",
    "hurt",
    "husband",
    "ice",
    "idea",
    "identity",
    "if",
    "ill",
    "image",
    "imagine",
    "immediately",
    "importance",
    "important",
    "impossible",
    "improve",
    "in",
    "inch",
    "include",
    "including",
    "income",
    "increase",
    "indeed",
    "independent",
    "indicate",
    "individual",
    "industrial",
    "industry",
    "influence",
    "information",
    "inside",
    "instance",
    "instant",
    "instead",
    "instrument",
    "interest",
    "interior",
    "into",
    "introduced",
    "invented",
    "involved",
    "iron",
    "is",
    "island",
    "it",
    "its",
    "itself",
    "jack",
    "jar",
    "jet",
    "job",
    "join",
    "joined",
    "journey",
    "joy",
    "judge",
    "jump",
    "jungle",
    "just",
    "keep",
    "kept",
    "key",
    "kids",
    "kill",
    "kind",
    "kitchen",
    "knew",
    "knife",
    "know",
    "knowledge",
    "known",
    "label",
    "labor",
    "lack",
    "lady",
    "laid",
    "lake",
    "lamp",
    "land",
    "language",
    "large",
    "larger",
    "largest",
    "last",
    "late",
    "later",
    "laugh",
    "law",
    "lay",
    "layers",
    "lead",
    "leader",
    "leaf",
    "learn",
    "least",
    "leather",
    "leave",
    "leaving",
    "led",
    "left",
    "leg",
    "length",
    "lesson",
    "let",
    "letter",
    "level",
    "library",
    "lie",
    "life",
    "lift",
    "light",
    "like",
    "likely",
    "limited",
    "line",
    "lion",
    "lips",
    "liquid",
    "list",
    "listen",
    "little",
    "live",
    "living",
    "load",
    "local",
    "locate",
    "location",
    "log",
    "lonely",
    "long",
    "longer",
    "look",
    "loose",
    "lose",
    "loss",
    "lost",
    "lot",
    "loud",
    "love",
    "lovely",
    "low",
    "lower",
    "luck",
    "lucky",
    "lunch",
    "lungs",
    "lying",
    "machine",
    "machinery",
    "mad",
    "made",
    "magic",
    "magnet",
    "mail",
    "main",
    "mainly",
    "major",
    "make",
    "making",
    "man",
    "managed",
    "manner",
    "manufacturing",
    "many",
    "map",
    "mark",
    "market",
    "married",
    "mass",
    "massage",
    "master",
    "material",
    "mathematics",
    "matter",
    "may",
    "maybe",
    "me",
    "meal",
    "mean",
    "means",
    "meant",
    "measure",
    "meat",
    "medicine",
    "meet",
    "melted",
    "member",
    "memory",
    "men",
    "mental",
    "merely",
    "met",
    "metal",
    "method",
    "mice",
    "middle",
    "might",
    "mighty",
    "mile",
    "military",
    "milk",
    "mill",
    "mind",
    "mine",
    "minerals",
    "minute",
    "mirror",
    "missing",
    "mission",
    "mistake",
    "mix",
    "mixture",
    "model",
    "modern",
    "molecular",
    "moment",
    "money",
    "monkey",
    "month",
    "mood",
    "moon",
    "more",
    "morning",
    "most",
    "mostly",
    "mother",
    "motion",
    "motor",
    "mountain",
    "mouse",
    "mouth",
    "move",
    "movement",
    "movie",
    "moving",
    "mud",
    "muscle",
    "music",
    "musical",
    "must",
    "my",
    "myself",
    "mysterious",
    "nails",
    "name",
    "nation",
    "national",
    "native",
    "natural",
    "naturally",
    "nature",
    "near",
    "nearby",
    "nearer",
    "nearest",
    "nearly",
    "necessary",
    "neck",
    "needed",
    "needle",
    "needs",
    "negative",
    "neighbor",
    "neighborhood",
    "nervous",
    "nest",
    "never",
    "new",
    "news",
    "newspaper",
    "next",
    "nice",
    "night",
    "nine",
    "no",
    "nobody",
    "nodded",
    "noise",
    "none",
    "noon",
    "nor",
    "north",
    "nose",
    "not",
    "note",
    "noted",
    "nothing",
    "notice",
    "noun",
    "now",
    "number",
    "numeral",
    "nuts",
    "object",
    "observe",
    "obtain",
    "occasionally",
    "occur",
    "ocean",
    "of",
    "off",
    "offer",
    "office",
    "officer",
    "official",
    "oil",
    "old",
    "older",
    "oldest",
    "on",
    "once",
    "one",
    "only",
    "onto",
    "open",
    "operation",
    "opinion",
    "opportunity",
    "opposite",
    "or",
    "orange",
    "orbit",
    "order",
    "ordinary",
    "organization",
    "organized",
    "origin",
    "original",
    "other",
    "ought",
    "our",
    "ourselves",
    "out",
    "outer",
    "outline",
    "outside",
    "over",
    "own",
    "owner",
    "oxygen",
    "pack",
    "package",
    "page",
    "paid",
    "pain",
    "paint",
    "pair",
    "palace",
    "pale",
    "pan",
    "paper",
    "paragraph",
    "parallel",
    "parent",
    "park",
    "part",
    "particles",
    "particular",
    "particularly",
    "partly",
    "parts",
    "party",
    "pass",
    "passage",
    "past",
    "path",
    "pattern",
    "pay",
    "peace",
    "pen",
    "pencil",
    "people",
    "per",
    "percent",
    "perfect",
    "perfectly",
    "perhaps",
    "period",
    "person",
    "personal",
    "pet",
    "phrase",
    "physical",
    "piano",
    "pick",
    "picture",
    "pictured",
    "pie",
    "piece",
    "pig",
    "pile",
    "pilot",
    "pine",
    "pink",
    "pipe",
    "pitch",
    "place",
    "plain",
    "plan",
    "plane",
    "planet",
    "planned",
    "planning",
    "plant",
    "plastic",
    "plate",
    "plates",
    "play",
    "pleasant",
    "please",
    "pleasure",
    "plenty",
    "plural",
    "plus",
    "pocket",
    "poem",
    "poet",
    "poetry",
    "point",
    "pole",
    "police",
    "policeman",
    "political",
    "pond",
    "pony",
    "pool",
    "poor",
    "popular",
    "population",
    "porch",
    "port",
    "position",
    "positive",
    "possible",
    "possibly",
    "post",
    "pot",
    "potatoes",
    "pound",
    "pour",
    "powder",
    "power",
    "powerful",
    "practical",
    "practice",
    "prepare",
    "present",
    "president",
    "press",
    "pressure",
    "pretty",
    "prevent",
    "previous",
    "price",
    "pride",
    "primitive",
    "principal",
    "principle",
    "printed",
    "private",
    "prize",
    "probably",
    "problem",
    "process",
    "produce",
    "product",
    "production",
    "program",
    "progress",
    "promised",
    "proper",
    "properly",
    "property",
    "protection",
    "proud",
    "prove",
    "provide",
    "public",
    "pull",
    "pupil",
    "pure",
    "purple",
    "purpose",
    "push",
    "put",
    "putting",
    "quarter",
    "queen",
    "question",
    "quick",
    "quickly",
    "quiet",
    "quietly",
    "quite",
    "rabbit",
    "race",
    "radio",
    "railroad",
    "rain",
    "raise",
    "ran",
    "ranch",
    "range",
    "rapidly",
    "rate",
    "rather",
    "raw",
    "rays",
    "reach",
    "read",
    "reader",
    "ready",
    "real",
    "realize",
    "rear",
    "reason",
    "recall",
    "receive",
    "recent",
    "recently",
    "recognize",
    "record",
    "red",
    "refer",
    "refused",
    "region",
    "regular",
    "related",
    "relationship",
    "religious",
    "remain",
    "remarkable",
    "remember",
    "remove",
    "repeat",
    "replace",
    "replied",
    "report",
    "represent",
    "require",
    "research",
    "respect",
    "rest",
    "result",
    "return",
    "review",
    "rhyme",
    "rhythm",
    "rice",
    "rich",
    "ride",
    "riding",
    "right",
    "ring",
    "rise",
    "rising",
    "river",
    "road",
    "roar",
    "rock",
    "rocket",
    "rocky",
    "rod",
    "roll",
    "roof",
    "room",
    "root",
    "rope",
    "rose",
    "rough",
    "round",
    "route",
    "row",
    "rubbed",
    "rubber",
    "rule",
    "ruler",
    "run",
    "running",
    "rush",
    "sad",
    "saddle",
    "safe",
    "safety",
    "said",
    "sail",
    "sale",
    "salmon",
    "salt",
    "same",
    "sand",
    "sang",
    "sat",
    "satellites",
    "satisfied",
    "save",
    "saved",
    "saw",
    "say",
    "scale",
    "scared",
    "scene",
    "school",
    "science",
    "scientific",
    "scientist",
    "score",
    "screen",
    "sea",
    "search",
    "season",
    "seat",
    "second",
    "secret",
    "section",
    "see",
    "seed",
    "seeing",
    "seems",
    "seen",
    "seldom",
    "select",
    "selection",
    "sell",
    "send",
    "sense",
    "sent",
    "sentence",
    "separate",
    "series",
    "serious",
    "serve",
    "service",
    "sets",
    "setting",
    "settle",
    "settlers",
    "seven",
    "several",
    "shade",
    "shadow",
    "shake",
    "shaking",
    "shall",
    "shallow",
    "shape",
    "share",
    "sharp",
    "she",
    "sheep",
    "sheet",
    "shelf",
    "shells",
    "shelter",
    "shine",
    "shinning",
    "ship",
    "shirt",
    "shoe",
    "shoot",
    "shop",
    "shore",
    "short",
    "shorter",
    "shot",
    "should",
    "shoulder",
    "shout",
    "show",
    "shown",
    "shut",
    "sick",
    "sides",
    "sight",
    "sign",
    "signal",
    "silence",
    "silent",
    "silk",
    "silly",
    "silver",
    "similar",
    "simple",
    "simplest",
    "simply",
    "since",
    "sing",
    "single",
    "sink",
    "sister",
    "sit",
    "sitting",
    "situation",
    "six",
    "size",
    "skill",
    "skin",
    "sky",
    "slabs",
    "slave",
    "sleep",
    "slept",
    "slide",
    "slight",
    "slightly",
    "slip",
    "slipped",
    "slope",
    "slow",
    "slowly",
    "small",
    "smaller",
    "smallest",
    "smell",
    "smile",
    "smoke",
    "smooth",
    "snake",
    "snow",
    "so",
    "soap",
    "social",
    "society",
    "soft",
    "softly",
    "soil",
    "solar",
    "sold",
    "soldier",
    "solid",
    "solution",
    "solve",
    "some",
    "somebody",
    "somehow",
    "someone",
    "something",
    "sometime",
    "somewhere",
    "son",
    "song",
    "soon",
    "sort",
    "sound",
    "source",
    "south",
    "southern",
    "space",
    "speak",
    "special",
    "species",
    "specific",
    "speech",
    "speed",
    "spell",
    "spend",
    "spent",
    "spider",
    "spin",
    "spirit",
    "spite",
    "split",
    "spoken",
    "sport",
    "spread",
    "spring",
    "square",
    "stage",
    "stairs",
    "stand",
    "standard",
    "star",
    "stared",
    "start",
    "state",
    "statement",
    "station",
    "stay",
    "steady",
    "steam",
    "steel",
    "steep",
    "stems",
    "step",
    "stepped",
    "stick",
    "stiff",
    "still",
    "stock",
    "stomach",
    "stone",
    "stood",
    "stop",
    "stopped",
    "store",
    "storm",
    "story",
    "stove",
    "straight",
    "strange",
    "stranger",
    "straw",
    "stream",
    "street",
    "strength",
    "stretch",
    "strike",
    "string",
    "strip",
    "strong",
    "stronger",
    "struck",
    "structure",
    "struggle",
    "stuck",
    "student",
    "studied",
    "studying",
    "subject",
    "substance",
    "success",
    "successful",
    "such",
    "sudden",
    "suddenly",
    "sugar",
    "suggest",
    "suit",
    "sum",
    "summer",
    "sun",
    "sunlight",
    "supper",
    "supply",
    "support",
    "suppose",
    "sure",
    "surface",
    "surprise",
    "surrounded",
    "swam",
    "sweet",
    "swept",
    "swim",
    "swimming",
    "swing",
    "swung",
    "syllable",
    "symbol",
    "system",
    "table",
    "tail",
    "take",
    "taken",
    "tales",
    "talk",
    "tall",
    "tank",
    "tape",
    "task",
    "taste",
    "taught",
    "tax",
    "tea",
    "teach",
    "teacher",
    "team",
    "tears",
    "teeth",
    "telephone",
    "television",
    "tell",
    "temperature",
    "ten",
    "tent",
    "term",
    "terrible",
    "test",
    "than",
    "thank",
    "that",
    "thee",
    "them",
    "themselves",
    "then",
    "theory",
    "there",
    "therefore",
    "these",
    "they",
    "thick",
    "thin",
    "thing",
    "think",
    "third",
    "thirty",
    "this",
    "those",
    "thou",
    "though",
    "thought",
    "thousand",
    "thread",
    "three",
    "threw",
    "throat",
    "through",
    "throughout",
    "throw",
    "thrown",
    "thumb",
    "thus",
    "thy",
    "tide",
    "tie",
    "tight",
    "tightly",
    "till",
    "time",
    "tin",
    "tiny",
    "tip",
    "tired",
    "title",
    "to",
    "tobacco",
    "today",
    "together",
    "told",
    "tomorrow",
    "tone",
    "tongue",
    "tonight",
    "too",
    "took",
    "tool",
    "top",
    "topic",
    "torn",
    "total",
    "touch",
    "toward",
    "tower",
    "town",
    "toy",
    "trace",
    "track",
    "trade",
    "traffic",
    "trail",
    "train",
    "transportation",
    "trap",
    "travel",
    "treated",
    "tree",
    "triangle",
    "tribe",
    "trick",
    "tried",
    "trip",
    "troops",
    "tropical",
    "trouble",
    "truck",
    "trunk",
    "truth",
    "try",
    "tube",
    "tune",
    "turn",
    "twelve",
    "twenty",
    "twice",
    "two",
    "type",
    "typical",
    "uncle",
    "under",
    "underline",
    "understanding",
    "unhappy",
    "union",
    "unit",
    "universe",
    "unknown",
    "unless",
    "until",
    "unusual",
    "up",
    "upon",
    "upper",
    "upward",
    "us",
    "use",
    "useful",
    "using",
    "usual",
    "usually",
    "valley",
    "valuable",
    "value",
    "vapor",
    "variety",
    "various",
    "vast",
    "vegetable",
    "verb",
    "vertical",
    "very",
    "vessels",
    "victory",
    "view",
    "village",
    "visit",
    "visitor",
    "voice",
    "volume",
    "vote",
    "vowel",
    "voyage",
    "wagon",
    "wait",
    "walk",
    "wall",
    "want",
    "war",
    "warm",
    "warn",
    "was",
    "wash",
    "waste",
    "watch",
    "water",
    "wave",
    "way",
    "we",
    "weak",
    "wealth",
    "wear",
    "weather",
    "week",
    "weigh",
    "weight",
    "welcome",
    "well",
    "went",
    "were",
    "west",
    "western",
    "wet",
    "whale",
    "what",
    "whatever",
    "wheat",
    "wheel",
    "when",
    "whenever",
    "where",
    "wherever",
    "whether",
    "which",
    "while",
    "whispered",
    "whistle",
    "white",
    "who",
    "whole",
    "whom",
    "whose",
    "why",
    "wide",
    "widely",
    "wife",
    "wild",
    "will",
    "willing",
    "win",
    "wind",
    "window",
    "wing",
    "winter",
    "wire",
    "wise",
    "wish",
    "with",
    "within",
    "without",
    "wolf",
    "women",
    "won",
    "wonder",
    "wonderful",
    "wood",
    "wooden",
    "wool",
    "word",
    "wore",
    "work",
    "worker",
    "world",
    "worried",
    "worry",
    "worse",
    "worth",
    "would",
    "wrapped",
    "write",
    "writer",
    "writing",
    "written",
    "wrong",
    "wrote",
    "yard",
    "year",
    "yellow",
    "yes",
    "yesterday",
    "yet",
    "you",
    "young",
    "younger",
    "your",
    "yourself",
    "youth",
    "zero",
    "zebra",
    "zipper",
    "zoo",
    "zulu",
  ];

  const iconTrash = `
<svg
   width="175.25208mm"
   height="175.25208mm"
   viewBox="0 0 175.25208 175.25208"
   version="1.1"
   id="svg1"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview1"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:document-units="mm" />
  <defs
     id="defs1" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(-16.488148,-55.657336)">
    <path
       id="rect1"
       d="m 186.00046,61.397091 c -7.72777,-7.727765 -20.2567,-7.641434 -28.09144,0.193301 L 104.11409,115.38533 50.319156,61.590392 c -7.834734,-7.834735 -20.363305,-7.920701 -28.09107,-0.192936 -7.727765,7.727765 -7.641799,20.256331 0.192936,28.091071 L 76.215957,143.28346 22.42102,197.0784 c -7.834736,7.83474 -7.920699,20.36331 -0.192934,28.09107 7.727765,7.72776 20.256332,7.6418 28.091068,-0.19293 l 53.794936,-53.79494 53.79494,53.79494 c 7.83473,7.83473 20.3633,7.92069 28.09106,0.19293 7.72777,-7.72776 7.64181,-20.25633 -0.19293,-28.09107 l -53.79494,-53.79494 53.79494,-53.794933 c 7.83473,-7.83474 7.92106,-20.363672 0.1933,-28.091436 z" />
  </g>
</svg>
`;

  const makeWord = (length = 1, delimiter = ' ') => {
    const result = [];
    for (let i = 0; i < length; i++) {
      const randomIndex = Math.round(Math.random() * (wordList.length - 1));
      const newWord = [...wordList[randomIndex]][0].toUpperCase() + [...wordList[randomIndex]].slice(1).join('');
      result.push(newWord);
    }
    return result.join(delimiter);
  };

  const chain = {
    "damage": [
      ["Damage", "Additional Damage", "Critical Additional Damage", "Damage Effects", "Critical effectS"],
      ["Acid", "Bludgeoning", "Chaotic", "Cold", "Electricity", "Evil", "Fire", "Force", "Good", "Lawful", "Mental", "Negative", "Piercing", "Poison", "Positive", "Slashing ", "Sonic"]
    ]
  };

  const addNewChainOption = (optionsContainer, type = "select", data) => {
    const chainData = (typeof data === "undefined") ? optionsContainer.closest(".chained-options").is("[data-chain]") ? chain[optionsContainer.closest(".chained-options").attr("data-chain")] : false : data;
    const newChain = $("<li/>").addClass("chained-options__chain");
    if (chainData) {
      if (optionsContainer.find("li").length < chainData.length) {
        const list = chainData[optionsContainer.find("li").length];
        const newOption = $(`<select><option>Select...</option></select>`).addClass("chained-options__option").addClass("chained-options__option--select");
        for (let i = 0; i < list.length; i++) {
          const newOpt = $("<option/>").text(list[i]);
          newOption.append(newOpt);
        }
        newChain.append(newOption);
      } else {
        const newOption = $(`<input type="text" placeholder="Value..." />`).addClass("chained-options__option").addClass("chained-options__option--input");
        const numberOfOptions = Math.round(Math.random() * 20) + 5;
        newChain.append(newOption);
      }
    } else {
      if (type === "select") {
        const newOption = $(`<select><option>Select...</option></select>`).addClass("chained-options__option").addClass("chained-options__option--select");
        const numberOfOptions = Math.round(Math.random() * 20) + 5;
        for (let i = 0; i < numberOfOptions; i++) {
          const newOpt = $("<option/>").text(makeWord(2));
          newOption.append(newOpt);
        }
        newChain.append(newOption);
      } else if (type === "input") {
        const newOption = $(`<input type="text" placeholder="Value..." />`).addClass("chained-options__option").addClass("chained-options__option--input");
        const numberOfOptions = Math.round(Math.random() * 20) + 5;
        newChain.append(newOption);
      }
    }
    optionsContainer.append(newChain);
  };

  $(".chained-options__add").click(function () {
    const chainedOptions = $(this).parent();
    const chainList = chainedOptions.find(".chained-options__list");
    const item = $("<div/>").addClass("chained-options__item");
    const deleteButton = $("<button/>").addClass("chained-options__trash").html(iconTrash);
    const optionsContainer = $("<ul/>").addClass("chained-options__container");
    addNewChainOption(optionsContainer);
    item.append(optionsContainer);
    item.append(deleteButton);
    chainList.append(item);
  });

  $(".chained-options").each(function () {
    const chainedOptions = $(this);
    const chainData = chainedOptions.is("[data-chain]") ? chain[chainedOptions.attr("data-chain")] : false;
    const chainList = chainedOptions.find(".chained-options__list");
    const item = $("<div/>").addClass("chained-options__item");
    const deleteButton = $("<button/>").addClass("chained-options__trash").html(iconTrash);
    const optionsContainer = $("<ul/>").addClass("chained-options__container");
    addNewChainOption(optionsContainer, "select", chainData);
    item.append(optionsContainer);
    item.append(deleteButton);
    chainList.append(item);
  });

  $("body").on("change", ".chained-options__option--select", function () {
    const type = Math.random() > 0.5 ? "input" : "select";
    const optionsContainer = $(this).closest(".chained-options__container");
    $(this).parent().nextAll().remove();
    addNewChainOption(optionsContainer, type);
  });

  $("body").on("change", ".chained-options__item:last-child .chained-options__option--input", function () {
    if ($(this).val().trim() === "") return;
    const chainedOptions = $(this).closest(".chained-options");
    const chainData = chainedOptions.is("[data-chain]") ? chain[chainedOptions.attr("data-chain")] : false;
    const chainList = chainedOptions.find(".chained-options__list");
    const item = $("<div/>").addClass("chained-options__item");
    const deleteButton = $("<button/>").addClass("chained-options__trash").html(iconTrash);
    const optionsContainer = $("<ul/>").addClass("chained-options__container");
    addNewChainOption(optionsContainer, "select", chainData);
    item.append(optionsContainer);
    item.append(deleteButton);
    chainList.append(item);
  });

  $("body").on("click", ".chained-options__trash", function (event) {
    const item = $(this).closest(".chained-options__item");
    if (item.is(":last-child")) {
      setTimeout(function () {
        item.find(".chained-options__chain:first-child select option:first-child").attr("selected", "selected");
        item.find(".chained-options__chain:not(:first-child)").remove();
      }, 50);
    } else {
      setTimeout(function () {
        item.remove()
      }, 50);
    }
  }); $("body").on("click", ".chip svg", function () {
    const chip = $(this).closest(".chip");
    chip.remove();
  }); const updateCounter = (counter, value) => {
    const span = counter.find("span");
    span.animate({ top: -20 }, 100, "swing", function () {
      span.text(value);
      span.css("top", "20px");
      span.animate({ top: 0 }, 100, "swing");
    });
  };

  const toggleCounterSearch = (counter, value) => {
    if (typeof value === "undefined")
      counter.toggleClass("counter--searching");
    else if (typeof value === "boolean" && value === true)
      counter.addClass("counter--searching");
    else if (typeof value === "boolean" && value === false)
      counter.removeClass("counter--searching");
  }; $(".form .tabbed-content .tabbed-content__tabs li").click(function () {
    if ($(this).hasClass("selected")) return;
    const id = $(this).attr("data-id");
    const modal = $(this).closest(".tabbed-content");
    const firstElement = modal.find(`.tabbed-content__tab:nth-child(${id}) > *:first-child`);
    setTimeout(function () { firstElement.focus() }, 50);
  }); $(".incrementor__button--delete").click(function () {
    console.log(1);
    const toDelete = $(this).attr("data-closest");
    $(this).closest(toDelete).remove();
  });

  $(".incrementor__button--increase").click(function () {
    const incremetor = $(this).closest(".incrementor");
    const valueField = incremetor.find(".incrementor__value");
    const value = isNaN(parseInt(valueField.val())) ? 0 : parseInt(valueField.val());
    valueField.val(value + 1);
    incremetor.removeClass("incrementor--delete");
    $(this).blur();
  });

  $(".incrementor__button--decrease").click(function () {
    const incremetor = $(this).closest(".incrementor");
    const valueField = incremetor.find(".incrementor__value");
    const value = isNaN(parseInt(valueField.val())) ? 0 : parseInt(valueField.val());
    const finalValue = Math.max(value - 1, 0);
    valueField.val(finalValue);
    if (finalValue === 0) {
      incremetor.addClass("incrementor--delete");
    } else {
      incremetor.removeClass("incrementor--delete");
    }
    $(this).blur();
  }); $(".modal__action--search").click(function () {
    const modal = $(this).closest(".modal");
    const search = modal.find(".modal__search input");
    modal.toggleClass("modal--searching");
    if (!modal.hasClass("modal--searching")) {
      search.val("");
      toggleCounterSearch(modal.find(".counter"), false);
    } else {
      setTimeout(function () {
        const hasFocus = search.is(":focus");
        const isEmpty = search.val().trim() === "";
        if (!hasFocus && isEmpty) {
          search.val("");
          modal.removeClass("modal--searching");
          toggleCounterSearch(modal.find(".counter"), false);
        }
      }, 5000);
    }
  });

  $(".modal__search input").change(function () {
    const modal = $(this).closest(".modal");
    toggleCounterSearch(modal.find(".counter"), true);
    if ($(this).val().trim() === "") {
      $(this).val("");
      modal.removeClass("modal--searching");
      toggleCounterSearch(modal.find(".counter"), false);
    }
  });

  $(".modal__action--close").click(function () {
    const modal = $(this).closest(".modal");
    closeModal(modal);
  });

  $(".background-blocker").hide();

  const showModal = (modal => {
    $(".sheet").addClass("sheet--showing-modal");
    const blocker = modal.closest(".background-blocker");
    blocker.fadeIn(100, "swing");
  });

  const closeModal = (modal => {
    $(".sheet").removeClass("sheet--showing-modal");
    const blocker = modal.closest(".background-blocker");
    modal.find(".modal__search input").val("");
    modal.removeClass("modal--searching");
    toggleCounterSearch(modal.find(".counter"), false);
    blocker.fadeOut(100, "swing");
  }); $(".resume").each(function () {
    const resume = $(this);
    const crop = resume.find(".resume__crop");
    const full = resume.find(".resume__full");

    const fullText = full.text();
    crop.find("span").text(fullText);
  });

  $(".resume .toggle-resume").click(function () {
    const resume = $(this).closest(".resume");
    resume.toggleClass("resume--open")
  }); $(".tabbed-content__tabs li").click(function () {
    if ($(this).hasClass("selected")) return;
    const id = $(this).attr("data-id");
    const modal = $(this).closest(".tabbed-content");
    modal.find(".tabbed-content__tabs .selected").removeClass("selected");
    $(this).addClass("selected");
    modal.find(".tabbed-content__tab.selected").removeClass("selected");
    modal.find(`.tabbed-content__tab:nth-child(${id})`).addClass("selected");
  });

  $(".states").each(function () {
    $(this).find(".states__state:first-child").addClass("states__state--selected");
  });

  const toggleState = (statesContainer) => {
    const active = statesContainer.find(".states__state--selected");
    const inactive = statesContainer.find(".states__state:not(.states__state--selected)");
    active.removeClass("states__state--selected");
    inactive.addClass("states__state--selected");
  }; $(".tabbed-content__tabs li").click(function () {
    if ($(this).hasClass("selected")) return;
    const id = $(this).attr("data-id");
    const modal = $(this).closest(".tabbed-content");
    modal.find(".tabbed-content__tabs .selected").removeClass("selected");
    $(this).addClass("selected");
    modal.find(".tabbed-content__tab.selected").removeClass("selected");
    modal.find(`.tabbed-content__tab:nth-child(${id})`).addClass("selected");
  });

  $(".tabbed-content").each(function () {
    const tabs = $(this).find(".tabbed-content__tabs");
    const content = $(this).find(".tabbed-content__content");

    tabs.find("li:first-child").addClass("selected");
    content.find(".tabbed-content__tab:first-child").addClass("selected");
  }); $(".tabbed-content__tabs li").click(function () {
    if ($(this).hasClass("selected")) return;
    const id = $(this).attr("data-id");
    const modal = $(this).closest(".tabbed-content");
    modal.find(".tabbed-content__tabs .selected").removeClass("selected");
    $(this).addClass("selected");
    modal.find(".tabbed-content__tab.selected").removeClass("selected");
    modal.find(`.tabbed-content__tab:nth-child(${id})`).addClass("selected");
  });

  $(".tabbed-content").each(function () {
    const tabs = $(this).find(".tabbed-content__tabs");
    const content = $(this).find(".tabbed-content__content");

    tabs.find("li:first-child").addClass("selected");
    content.find(".tabbed-content__tab:first-child").addClass("selected");
  }); $(".text-area__edit").change(function () {
    const textArea = $(this).closest(".text-area");
    const display = textArea.find(".text-area__display");
    const isEmpty = $(this).val().trim() === "";
    console.log(1);
    if (isEmpty) {
      display.text($(this).attr("data-placeholder"));
      $(this).val("");
      textArea.addClass("text-area--empty");
    } else {
      display.text($(this).val());
      textArea.removeClass("text-area--empty");
    }
  }); $(".toggle").click(function () {
    $(this).toggleClass("toggle--on");
  });</script>